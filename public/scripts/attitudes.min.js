"use strict";(function(){function b(e,c,f){var d=new FormData();d.append("attitude_type",f);fetch("./attitudes/".concat(e,"/").concat(c),{method:"POST",body:d}).then(function(g){if(g.status===200){return g.json()}else{throw new Error("Failed to attitude: ".concat(g.status," ").concat(g.statusText))}}).then(function(l){if(l){var m=l.success,k=l.data,h=k.positive_count,j=k.negative_count;if(m){var g=document.querySelector('.attitude-button[data-attitudeable-type="'.concat(e,'"][data-attitudeable-id="').concat(c,'"][data-attitude-type="positive"]'));var i=document.querySelector('.attitude-button[data-attitudeable-type="'.concat(e,'"][data-attitudeable-id="').concat(c,'"][data-attitude-type="negative"]'));if(g){g.dataset.count=h;g.dataset.attituded=f==="positive"?"1":"0";g.querySelector(".attitude-button-count").textContent=h>0?h:""}if(i){i.dataset.count=j;i.dataset.attituded=f==="negative"?"1":"0";i.querySelector(".attitude-button-count").textContent=j>0?j:""}}}})["catch"](function(g){console.error(g)})}function a(){var c=document.querySelectorAll(".attitude-button");c.forEach(function(d){d.addEventListener("click",function(g){g.preventDefault();console.log(d.dataset);var h=d.dataset,i=h.attitudeableType,f=h.attitudeableId,j=h.attitudeType,e=h.attituded;if(!i||!f||!j||!e){return}if(e==="1"){b(i,f,"neutral")}else{b(i,f,j)}})})}window.initAttitudes=a;document.addEventListener("DOMContentLoaded",a)})();